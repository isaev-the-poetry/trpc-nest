# üöÄ Demo Instructions: tRPC NestJS Decorators

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –ø–∞–∫–µ—Ç–∞ `trpc-nest-decorators`.

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js (–≤–µ—Ä—Å–∏—è 14 –∏–ª–∏ –≤—ã—à–µ)
- npm –∏–ª–∏ yarn
- curl (–¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤)
- python3 (–¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è JSON, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Å–±–æ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞

```bash
cd ../packages/trpc-nest-decorators
npm install
npm run build
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø—Ä–∏–º–µ—Ä–∞

```bash
cd ../example
npm install
```

### 3. –°–±–æ—Ä–∫–∞ –ø—Ä–∏–º–µ—Ä–∞

```bash
npm run build
```

### 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
npm start
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ http://localhost:3000

## üéØ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~2 –º–∏–Ω—É—Ç—ã

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç
./test-current-api.sh
```

**–ß—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö
- ‚úÖ –°—Ö–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ tRPC —Ä–æ—É—Ç–µ—Ä–∞
- ‚úÖ –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞ `posts.getAll`

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–ª–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~5 –º–∏–Ω—É—Ç

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ–ª–Ω—É—é –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é
./trpc-demo-working.sh
```

**–ß—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è:**
- üìä Query –æ–ø–µ—Ä–∞—Ü–∏–∏ (getAll, getById, search)
- üîÑ Mutation –æ–ø–µ—Ä–∞—Ü–∏–∏ (create, update, delete)
- üõ°Ô∏è –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- üìà –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚ö° –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ö–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~3 –º–∏–Ω—É—Ç—ã

```bash
# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
./demo-trpc-calls.sh
```

**–ß—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è:**
- üîÆ –ü—Ä–∏–º–µ—Ä—ã —Å –ø–æ–ª–Ω—ã–º tRPC HTTP –∞–¥–∞–ø—Ç–µ—Ä–æ–º
- üì° GET –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è query –æ–ø–µ—Ä–∞—Ü–∏–π
- üì§ POST –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è mutations
- üîÑ Batch –∑–∞–ø—Ä–æ—Å—ã
- üåê WebSocket subscriptions
- üìö –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## üß™ –†—É—á–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –¢–µ—Å—Ç 1: –û—Å–Ω–æ–≤–Ω—ã–µ endpoints

```bash
# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
curl http://localhost:3000/api

# –°—Ö–µ–º–∞ tRPC —Ä–æ—É—Ç–µ—Ä–∞
curl http://localhost:3000/api/trpc-schema
```

### –¢–µ—Å—Ç 2: Query –æ–ø–µ—Ä–∞—Ü–∏–∏

```bash
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
curl -X POST http://localhost:3000/api/trpc/users.getAll \
  -H "Content-Type: application/json" \
  -d "{}"

# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ—Å—Ç–æ–≤
curl -X POST http://localhost:3000/api/trpc/posts.getAll \
  -H "Content-Type: application/json" \
  -d "{}"

# –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
curl -X POST http://localhost:3000/api/trpc/users.getById \
  -H "Content-Type: application/json" \
  -d '{"id": 1}'

# –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
curl -X POST http://localhost:3000/api/trpc/users.search \
  -H "Content-Type: application/json" \
  -d '{"query": "john"}'
```

### –¢–µ—Å—Ç 3: Mutation –æ–ø–µ—Ä–∞—Ü–∏–∏

```bash
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
curl -X POST http://localhost:3000/api/trpc/users.create \
  -H "Content-Type: application/json" \
  -d '{"name": "Alice Johnson", "email": "alice@example.com", "age": 28}'

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ—Å—Ç
curl -X POST http://localhost:3000/api/trpc/posts.create \
  -H "Content-Type: application/json" \
  -d '{"title": "Demo Post", "content": "This is a demo post!", "authorId": 1}'

# –û–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å—Ç
curl -X POST http://localhost:3000/api/trpc/posts.update \
  -H "Content-Type: application/json" \
  -d '{"id": 1, "title": "Updated Title", "content": "Updated content"}'
```

### –¢–µ—Å—Ç 4: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```bash
# –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞
curl -X POST http://localhost:3000/api/trpc/invalid.method \
  -H "Content-Type: application/json" \
  -d "{}"

# –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
curl -X POST http://localhost:3000/api/trpc/invalidformat \
  -H "Content-Type: application/json" \
  -d "{}"

# –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
curl -X POST http://localhost:3000/api/trpc/users.getById \
  -H "Content-Type: application/json" \
  -d '{"id": 999}'
```

## üé® –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –¥–ª—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏

### –°–ª–∞–π–¥ 1: –í–≤–µ–¥–µ–Ω–∏–µ
```bash
# –ü–æ–∫–∞–∂–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
curl http://localhost:3000/api | python3 -m json.tool
```

### –°–ª–∞–π–¥ 2: –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```bash
# –ü–æ–∫–∞–∂–∏—Ç–µ –∫–∞–∫ –ª–µ–≥–∫–æ –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä—É
curl -X POST http://localhost:3000/api/trpc/posts.getAll \
  -H "Content-Type: application/json" \
  -d "{}" | python3 -m json.tool
```

### –°–ª–∞–π–¥ 3: –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü–æ–∫–∞–∂–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
curl -X POST http://localhost:3000/api/trpc/users.create \
  -H "Content-Type: application/json" \
  -d '{"name": "John", "email": "john@test.com", "age": 25}' | python3 -m json.tool
```

### –°–ª–∞–π–¥ 4: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
```bash
# –ü–æ–∫–∞–∂–∏—Ç–µ graceful error handling
curl -X POST http://localhost:3000/api/trpc/users.getById \
  -H "Content-Type: application/json" \
  -d '{"id": 999}' | python3 -m json.tool
```

## üìä –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –æ–¥–∏–Ω–æ—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

```bash
# –ò–∑–º–µ—Ä—å—Ç–µ –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞
time curl -X POST http://localhost:3000/api/trpc/posts.getAll \
  -H "Content-Type: application/json" \
  -d "{}" > /dev/null 2>&1
```

### –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

```bash
# –¢–µ—Å—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
for i in {1..10}; do
  curl -X POST http://localhost:3000/api/trpc/users.getAll \
    -H "Content-Type: application/json" \
    -d "{}" -s -w "Request $i: %{time_total}s\n" -o /dev/null
done
```

### –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω ab)

```bash
# Apache Bench —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
ab -n 100 -c 10 -T 'application/json' -p data.json \
   http://localhost:3000/api/trpc/posts.getAll
```

–ì–¥–µ `data.json` —Å–æ–¥–µ—Ä–∂–∏—Ç: `{}`

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run start:dev
```

### –ü—Ä–æ–¥–∞–∫—à–Ω

```bash
# –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
npm run build

# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–¥–∞–∫—à–Ω –≤–µ—Ä—Å–∏–∏
npm start
```

### –î–µ–±–∞–≥

```bash
# –ó–∞–ø—É—Å–∫ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
DEBUG=* npm start
```

## üìù –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–æ–≤

### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç

```json
{
  "procedure": "posts.getAll",
  "input": {},
  "result": [
    {
      "id": 1,
      "title": "First Post",
      "content": "This is the first post content",
      "authorId": 1,
      "createdAt": "2024-01-01T00:00:00.000Z",
      "updatedAt": "2024-01-01T00:00:00.000Z"
    }
  ],
  "timestamp": "2025-06-04T16:52:54.411Z"
}
```

### –û—Ç–≤–µ—Ç —Å –æ—à–∏–±–∫–æ–π

```json
{
  "error": "Router 'invalid' not found. Available: users, posts",
  "procedure": "invalid.method",
  "timestamp": "2025-06-04T16:53:00.123Z"
}
```

## üéØ –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏

1. **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**: –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**: tRPC —Ä–æ—É—Ç–µ—Ä—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ TypeScript
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Zod –∏–∑ –∫–æ—Ä–æ–±–∫–∏
5. **DI —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π DI —Å–∏—Å—Ç–µ–º–æ–π NestJS
6. **–ì–∏–±–∫–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç query, mutation –∏ subscription
7. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã

## üö® –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç
lsof -i :3000

# –£–±–∏–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
pkill -f "node.*nest"
```

### –û—à–∏–±–∫–∏ curl
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
curl http://localhost:3000/api

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç JSON
echo '{"id": 1}' | python3 -m json.tool
```

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
rm -rf node_modules package-lock.json
npm install
```

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [tRPC Documentation](https://trpc.io)
- [NestJS Documentation](https://nestjs.com)
- [Zod Documentation](https://zod.dev)
- [TypeScript Documentation](https://typescriptlang.org)

---

**–£–¥–∞—á–Ω–æ–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏! üéâ** 